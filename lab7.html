<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Banking Application - Design Patterns</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    body {
      font-family: 'Poppins', sans-serif;
      background: linear-gradient(135deg, #001f3f, #004080, #0059b3);
      padding: 0;
      margin: 0;
      color: #222;
      display: flex;
      justify-content: center;
      align-items: flex-start;
      min-height: 100vh;
    }

    body.dark {
      background: linear-gradient(135deg, #0a0a0a, #1a1a2e, #16213e);
      color: #eee;
    }

    /* ---------- Top Bar ---------- */
    .top-bar {
      width: 100%;
      padding: 15px 30px;
      display: flex;
      align-items: center;
      position: fixed;
      top: 0;
      left: 0;
      background: rgba(255, 255, 255, 0.15);
      backdrop-filter: blur(12px);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
      z-index: 1000;
    }

    .logo {
      display: flex;
      align-items: center;
      font-size: 1.4rem;
      font-weight: bold;
      color: #fff;
    }

    .logo i {
      margin-right: 8px;
      color: #00e676;
    }

    /* ---------- App Card ---------- */
    .app {
      margin-top: 100px;
      width: 100%;
      max-width: 800px;
      padding: 30px;
      border-radius: 20px;
      background: rgba(255, 255, 255, 0.15);
      backdrop-filter: blur(15px);
      box-shadow: 0 10px 30px rgba(0,0,0,0.3);
      animation: fadeIn 1s ease-in-out;
      color: inherit;
    }

    body.dark .app {
      background: rgba(34, 40, 49, 0.8);
    }

    h2 {
      text-align: center;
      font-size: 2rem;
      margin-bottom: 20px;
      color: #fff;
    }

    .balance {
      font-size: 1.4rem;
      margin: 15px 0;
      text-align: center;
      font-weight: 600;
      color: #00e676;
    }

    .controls, .interest-section {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 12px;
      margin: 15px 0;
    }

    input, select {
      padding: 12px 14px;
      border: none;
      border-radius: 10px;
      font-size: 1rem;
      background: rgba(255, 255, 255, 0.8);
      outline: none;
    }

    body.dark input, body.dark select {
      background: rgba(57, 62, 70, 0.9);
      color: #eee;
    }

    button {
      padding: 12px 18px;
      border: none;
      border-radius: 12px;
      cursor: pointer;
      font-size: 1rem;
      font-weight: 600;
      transition: all 0.25s ease;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    button:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 12px rgba(0,0,0,0.2);
    }

    .deposit { background: #43a047; color: #fff; }
    .withdraw { background: #e53935; color: #fff; }
    .transfer { background: #1e88e5; color: #fff; }
    .undo { background: #f57c00; color: #fff; }
    .interest-section button { background: #6a1b9a; color: #fff; }
    .dark-toggle { background: #212121; color: #fff; }

    /* ---------- Transaction Log ---------- */
    .log {
      background: rgba(255,255,255,0.9);
      padding: 15px;
      height: 200px;
      overflow-y: auto;
      margin-top: 20px;
      border-radius: 12px;
      font-size: 0.95rem;
      line-height: 1.6;
    }

    body.dark .log {
      background: rgba(44, 44, 44, 0.9);
      color: #eee;
    }

    .log p {
      margin: 5px 0;
      padding: 6px 10px;
      border-radius: 8px;
      background: #f0f0f0;
    }

    body.dark .log p {
      background: #333;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
  </style>
</head>
<body>
  <!-- Top Bar -->
  <div class="top-bar">
    <div class="logo">
      <i class="fas fa-university"></i> MyBank
    </div>
  </div>

  <!-- Main App -->
  <div class="app">
    <h2>üè¶ Banking Application</h2>
    <div class="balance">Balance: ‚Çπ<span id="balance">1000</span></div>

    <div class="controls">
      <input type="number" id="amount" placeholder="Enter Amount">
      <button class="deposit" onclick="executeCommand(new DepositCommand(account, getAmount()))">
        <i class="fas fa-plus-circle"></i> Deposit
      </button>
      <button class="withdraw" onclick="executeCommand(new WithdrawCommand(account, getAmount()))">
        <i class="fas fa-minus-circle"></i> Withdraw
      </button>
      <button class="transfer" onclick="executeCommand(new TransferCommand(account, getAmount()))">
        <i class="fas fa-exchange-alt"></i> Transfer
      </button>
      <button class="undo" onclick="undoCommand()">
        <i class="fas fa-undo"></i> Undo
      </button>
    </div>

    <div class="interest-section">
      <label for="strategy"><strong>Interest Strategy:</strong></label>
      <select id="strategy" onchange="setStrategy()">
        <option value="savings">Savings</option>
        <option value="fixed">Fixed Deposit</option>
        <option value="current">Current</option>
      </select>
      <button onclick="calculateInterest()">
        <i class="fas fa-percent"></i> Calculate Interest
      </button>
      <button class="dark-toggle" onclick="toggleDarkMode()">
        <i class="fas fa-adjust"></i> Toggle Dark Mode
      </button>
    </div>

    <h3>üìú Transaction Log</h3>
    <div class="log" id="log"></div>
  </div>

  <script>
    // Observer Pattern
    class Customer {
      constructor(name) { this.name = name; }
      update(message) { log(`${this.name} notified: ${message}`); }
    }

    class Account {
      constructor(balance = 0) {
        this.balance = balance;
        this.customers = [];
        this.interestStrategy = null;
      }
      attach(customer) { this.customers.push(customer); }
      notify(message) { this.customers.forEach(c => c.update(message)); }
      deposit(amount) { this.balance += amount; this.notify(`Deposited ‚Çπ${amount}`); }
      withdraw(amount) { this.balance -= amount; this.notify(`Withdrew ‚Çπ${amount}`); }
      transfer(amount) { this.balance -= amount; this.notify(`Transferred ‚Çπ${amount}`); }
      setStrategy(strategy) { this.interestStrategy = strategy; }
      calculateInterest() {
        if (this.interestStrategy) return this.interestStrategy.calculate(this.balance);
        return 0;
      }
    }

    // Strategy Pattern
    class SavingsInterest { calculate(balance) { return balance * 0.04; } }
    class FixedDepositInterest { calculate(balance) { return balance * 0.07; } }
    class CurrentInterest { calculate(balance) { return balance * 0.02; } }

    // Command Pattern
    class Command { execute() {} undo() {} }
    class DepositCommand extends Command {
      constructor(account, amount) { super(); this.account = account; this.amount = amount; }
      execute() { this.account.deposit(this.amount); updateUI(); }
      undo() { this.account.withdraw(this.amount); updateUI(); log(`Undo Deposit: ‚Çπ${this.amount}`); }
    }
    class WithdrawCommand extends Command {
      constructor(account, amount) { super(); this.account = account; this.amount = amount; }
      execute() { this.account.withdraw(this.amount); updateUI(); }
      undo() { this.account.deposit(this.amount); updateUI(); log(`Undo Withdraw: ‚Çπ${this.amount}`); }
    }
    class TransferCommand extends Command {
      constructor(account, amount) { super(); this.account = account; this.amount = amount; }
      execute() { this.account.transfer(this.amount); updateUI(); }
      undo() { this.account.deposit(this.amount); updateUI(); log(`Undo Transfer: ‚Çπ${this.amount}`); }
    }

    // App Logic
    let account = new Account(1000);
    let customer1 = new Customer("Phani Kumar");
    let customer2 = new Customer("Sai Teja");
    account.attach(customer1);
    account.attach(customer2);

    let commandHistory = [];

    function executeCommand(command) {
      command.execute();
      commandHistory.push(command);
    }
    function undoCommand() {
      let command = commandHistory.pop();
      if (command) command.undo();
    }
    function setStrategy() {
      let choice = document.getElementById("strategy").value;
      if (choice === "savings") account.setStrategy(new SavingsInterest());
      else if (choice === "fixed") account.setStrategy(new FixedDepositInterest());
      else if (choice === "current") account.setStrategy(new CurrentInterest());
      log(`Strategy set: ${choice}`);
    }
    function calculateInterest() {
      let interest = account.calculateInterest();
      log(`Interest calculated: ‚Çπ${interest.toFixed(2)}`);
    }
    function updateUI() {
      document.getElementById("balance").innerText = account.balance;
    }
    function log(message) {
      let logDiv = document.getElementById("log");
      logDiv.innerHTML += `<p>${message}</p>`;
      logDiv.scrollTop = logDiv.scrollHeight;
    }
    function getAmount() {
      return parseInt(document.getElementById("amount").value) || 0;
    }

    // Dark Mode
    function toggleDarkMode() { document.body.classList.toggle("dark"); }
  </script>
</body>
</html>
